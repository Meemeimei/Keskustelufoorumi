{% extends "shared/loginLayout.html" %}

{% block body %}

<form id="changePasswordForm" method="POST" action="{{ url_for('changePassword') }}">
    <div>
      <span>Vanha salasana</span><input type="text" name="username" 
            pattern=".{3,10}"
            required title="3-10 merkkiä pitkä"/>
    </div>
    <div>
      <span>Uusi salasana</span><input id="passwordInput" type="password" name="password"
            pattern=".{3,10}"
            required title="3-10 merkkiä pitkä"/>
    </div>
    <div>
        <span>Uusi salasana uudestaan</span><input id="passwordCheck" type="password"
            name="password"
            pattern=".{3,10}"
            required title="3-10 merkkiä pitkä"
            onkeydown="compare()"/>
        <input type="checkbox" onclick="displayPassword()"><span>Näytä salasana</span>
    </div>
    <div>
        <div id="passwordCompareError" hidden>Salasanat eivät täsmänneet</div>
        <input id="submitButton" type="submit" value="Kirjaudu" disabled/>
    </div>
  </form>

  <script>
    function displayPassword() {
      var passwordInput = $("#passwordInput");
      if (passwordInput.type === "password") {
        passwordInput.type = "text";
      } else {
        passwordInput.type = "password";
      }
    }

    function compare() {
        if($("#passwordInput").val() === $("#passwordCheck").val()) {
            $("#passwordCompareError").hide();
            $("#submitButton").disabled = false;
        } else {
            $("#passwordCompareError").show();
            $("#submitButton").disabled = true;
        }
    }
  </script>


{% endblock %}